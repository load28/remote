# 1. FSD 아키텍처 개요

## Feature-Sliced Design이란?

**Feature-Sliced Design (FSD)**은 프론트엔드 애플리케이션을 위한 아키텍처 방법론입니다. 코드를 **영향 범위(Layers)**, **비즈니스 도메인(Slices)**, **기술적 목적(Segments)**으로 체계적으로 조직합니다.

### 왜 FSD인가?

| 문제점 | FSD 해결책 |
|--------|-----------|
| 코드베이스가 커질수록 구조 파악이 어려움 | 표준화된 계층 구조로 즉시 파악 가능 |
| 비즈니스 요구사항 변경에 취약 | 슬라이스 단위 독립성으로 변경 영향 최소화 |
| 팀원 간 코드 스타일 불일치 | 명확한 규칙과 컨벤션 제공 |
| 순환 의존성 문제 | 단방향 의존성 규칙으로 원천 차단 |

## 핵심 개념: 3계층 구조

FSD는 코드를 3가지 수준으로 분해합니다:

```
┌─────────────────────────────────────────────┐
│                  Layers                      │
│  (영향 범위에 따른 최상위 분류)                │
│                                              │
│  ┌─────────────────────────────────────┐    │
│  │              Slices                  │    │
│  │  (비즈니스 도메인에 따른 분류)         │    │
│  │                                      │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │         Segments            │    │    │
│  │  │  (기술적 목적에 따른 분류)    │    │    │
│  │  └─────────────────────────────┘    │    │
│  └─────────────────────────────────────┘    │
└─────────────────────────────────────────────┘
```

### Layer (계층)

최상위 디렉토리로, **표준화**되어 있습니다. 최대 7개 계층이 있으며, 프로젝트에 따라 선택적으로 사용합니다.

```
src/
├── app/        # 앱 초기화, 프로바이더
├── pages/      # 페이지 (FSD 계층)
├── widgets/    # 대형 UI 블록
├── features/   # 사용자 기능
├── entities/   # 비즈니스 엔티티
└── shared/     # 공유 유틸리티
```

### Slice (슬라이스)

계층 내에서 **비즈니스 도메인**에 따라 분류합니다. 이름은 프로젝트마다 다릅니다.

```
entities/
├── user/       # 사용자 엔티티
├── product/    # 상품 엔티티
└── order/      # 주문 엔티티
```

### Segment (세그먼트)

슬라이스 내에서 **기술적 목적**에 따라 분류합니다.

```
entities/user/
├── ui/         # UI 컴포넌트
├── model/      # 데이터 모델, 스토어
├── api/        # API 호출
└── lib/        # 유틸리티 함수
```

## 핵심 원칙

### 1. 단방향 의존성 (Unidirectional Dependencies)

**상위 계층은 하위 계층만 import할 수 있습니다.**

```
app → pages → widgets → features → entities → shared
 ↓      ↓        ↓         ↓          ↓          ↓
(높음)                                         (낮음)
```

```typescript
// ✅ 올바름: feature가 entity를 import
// features/add-to-cart/model/cart.ts
import { Product } from '@/entities/product';

// ❌ 잘못됨: entity가 feature를 import
// entities/product/model/product.ts
import { AddToCart } from '@/features/add-to-cart'; // 금지!
```

### 2. 슬라이스 격리 (Slice Isolation)

**같은 계층의 슬라이스끼리는 서로 참조할 수 없습니다.**

```typescript
// ❌ 잘못됨: entity가 다른 entity를 직접 import
// entities/order/model/order.ts
import { User } from '@/entities/user'; // 금지!

// ✅ 올바름: @x 표기법 사용 (cross-import)
// entities/order/model/order.ts
import { User } from '@/entities/user/@x/order';
```

### 3. Public API (공개 인터페이스)

**모든 슬라이스는 index.ts를 통해서만 외부에 노출됩니다.**

```typescript
// entities/user/index.ts (Public API)
export { UserCard } from './ui/UserCard';
export { userModel } from './model/user';
export type { User, UserRole } from './model/types';

// 외부에서 import
import { UserCard, userModel } from '@/entities/user';
```

## 계층 의존성 다이어그램

```
┌──────────────────────────────────────────────────────────┐
│                         app                               │
│  (앱 초기화, 라우팅, 프로바이더, 글로벌 스타일)              │
└─────────────────────────┬────────────────────────────────┘
                          │ import
                          ▼
┌──────────────────────────────────────────────────────────┐
│                        pages                              │
│  (전체 페이지, 라우트별 컴포넌트)                           │
└─────────────────────────┬────────────────────────────────┘
                          │ import
                          ▼
┌──────────────────────────────────────────────────────────┐
│                       widgets                             │
│  (독립적인 대형 UI 블록, entities+features 조합)           │
└─────────────────────────┬────────────────────────────────┘
                          │ import
                          ▼
┌──────────────────────────────────────────────────────────┐
│                       features                            │
│  (사용자 인터랙션, 비즈니스 가치를 제공하는 기능)             │
└─────────────────────────┬────────────────────────────────┘
                          │ import
                          ▼
┌──────────────────────────────────────────────────────────┐
│                       entities                            │
│  (비즈니스 엔티티: User, Product, Order 등)                │
└─────────────────────────┬────────────────────────────────┘
                          │ import
                          ▼
┌──────────────────────────────────────────────────────────┐
│                        shared                             │
│  (재사용 가능한 UI 키트, 유틸리티, API 클라이언트)           │
└──────────────────────────────────────────────────────────┘
```

## FSD의 장점

### 1. 높은 응집도 (High Cohesion)
관련된 코드가 한 곳에 모여 있어 기능 파악이 쉽습니다.

### 2. 낮은 결합도 (Low Coupling)
슬라이스 간 의존성이 최소화되어 변경 영향이 제한됩니다.

### 3. 확장성 (Scalability)
프로젝트가 커져도 구조가 일관되게 유지됩니다.

### 4. 온보딩 용이
새 팀원이 프로젝트 구조를 빠르게 파악할 수 있습니다.

## 다음 단계

- [계층 (Layers) 상세 가이드](./02-layers.md)
- [슬라이스와 세그먼트](./03-slices-segments.md)
