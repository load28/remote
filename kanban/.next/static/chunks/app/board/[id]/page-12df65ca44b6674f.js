(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{3827:function(e,t,r){Promise.resolve().then(r.bind(r,1905))},8233:function(e,t,r){"use strict";r.d(t,{o:function(){return l},Y:function(){return m}});var a=r(7437),n=r(1039),d=r(2975),s=r.n(d);function l(e){let{board:t,onClick:r,actions:d,isActive:l}=e,o=t.columns.reduce((e,t)=>e+t.cards.length,0);return(0,a.jsxs)("div",{className:(0,n.cn)(s().card,l&&s().active),onClick:r,children:[(0,a.jsxs)("div",{className:s().content,children:[(0,a.jsx)("h3",{className:s().title,children:t.title}),(0,a.jsxs)("div",{className:s().stats,children:[(0,a.jsxs)("span",{children:[t.columns.length," columns"]}),(0,a.jsxs)("span",{children:[o," cards"]})]})]}),d&&(0,a.jsx)("div",{className:s().actions,onClick:e=>e.stopPropagation(),children:d})]})}var o=r(9625),i=r(6885),c=r(9360);let u=["To Do","In Progress","Done"],m=(0,o.Ue)()((0,i.tJ)((e,t)=>({boards:[],currentBoardId:null,createBoard:t=>{let r=new Date().toISOString(),a=(0,c.Z)(),n=u.map((e,t)=>({id:(0,c.Z)(),title:e,boardId:a,order:t,cards:[],createdAt:r})),d={id:a,title:t.title,columns:n,createdAt:r,updatedAt:r};return e(e=>({boards:[...e.boards,d],currentBoardId:a})),d},updateBoard:(t,r)=>{e(e=>({boards:e.boards.map(e=>e.id===t?{...e,title:r,updatedAt:new Date().toISOString()}:e)}))},deleteBoard:t=>{e(e=>({boards:e.boards.filter(e=>e.id!==t),currentBoardId:e.currentBoardId===t?null:e.currentBoardId}))},setCurrentBoard:t=>{e({currentBoardId:t})},getCurrentBoard:()=>{let{boards:e,currentBoardId:r}=t();return e.find(e=>e.id===r)||null},createColumn:t=>{let r=new Date().toISOString();e(e=>({boards:e.boards.map(e=>{if(e.id!==t.boardId)return e;let a={id:(0,c.Z)(),title:t.title,boardId:t.boardId,order:e.columns.length,cards:[],createdAt:r};return{...e,columns:[...e.columns,a],updatedAt:r}})}))},updateColumn:(t,r)=>{e(e=>({boards:e.boards.map(e=>({...e,columns:e.columns.map(e=>e.id===t?{...e,title:r}:e),updatedAt:new Date().toISOString()}))}))},deleteColumn:t=>{e(e=>({boards:e.boards.map(e=>({...e,columns:e.columns.filter(e=>e.id!==t),updatedAt:new Date().toISOString()}))}))},createCard:t=>{let r=new Date().toISOString();e(e=>({boards:e.boards.map(e=>({...e,columns:e.columns.map(e=>{if(e.id!==t.columnId)return e;let a={id:(0,c.Z)(),title:t.title,description:t.description,columnId:t.columnId,order:e.cards.length,createdAt:r,updatedAt:r};return{...e,cards:[...e.cards,a]}}),updatedAt:r}))}))},updateCard:(t,r)=>{let a=new Date().toISOString();e(e=>({boards:e.boards.map(e=>({...e,columns:e.columns.map(e=>({...e,cards:e.cards.map(e=>e.id===t?{...e,...r,updatedAt:a}:e)})),updatedAt:a}))}))},deleteCard:t=>{e(e=>({boards:e.boards.map(e=>({...e,columns:e.columns.map(e=>({...e,cards:e.cards.filter(e=>e.id!==t)})),updatedAt:new Date().toISOString()}))}))},moveCard:(t,r,a)=>{e(e=>{let n=null,d=e.boards.map(e=>({...e,columns:e.columns.map(e=>{let r=e.cards.findIndex(e=>e.id===t);return -1!==r?(n={...e.cards[r]},{...e,cards:e.cards.filter(e=>e.id!==t)}):e})}));return n?{boards:d.map(e=>({...e,columns:e.columns.map(e=>{if(e.id!==r)return e;let t=[...e.cards],d={...n,columnId:r,order:a,updatedAt:new Date().toISOString()};return t.splice(a,0,d),{...e,cards:t.map((e,t)=>({...e,order:t}))}}),updatedAt:new Date().toISOString()}))}:e})}}),{name:"kanban-boards"}))},1905:function(e,t,r){"use strict";r.d(t,{BoardPage:function(){return K}});var a=r(7437),n=r(2265),d=r(9376),s=r(8233),l=r(7648),o=r(3279),i=r(6689),c=r.n(i);function u(e){let{board:t}=e,[r,d]=(0,n.useState)(!1),[i,u]=(0,n.useState)(t.title),m=(0,s.Y)(e=>e.updateBoard),_=()=>{i.trim()&&i.trim()!==t.title?m(t.id,i.trim()):u(t.title),d(!1)};return(0,a.jsxs)("header",{className:c().header,children:[(0,a.jsxs)("div",{className:c().left,children:[(0,a.jsx)(l.default,{href:"/",className:c().backLink,children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),r?(0,a.jsx)(o.II,{value:i,onChange:e=>u(e.target.value),onBlur:_,onKeyDown:e=>{"Enter"===e.key?_():"Escape"===e.key&&(u(t.title),d(!1))},autoFocus:!0,className:c().titleInput}):(0,a.jsx)("h1",{className:c().title,onClick:()=>d(!0),children:t.title})]}),(0,a.jsx)("div",{className:c().right,children:(0,a.jsxs)("span",{className:c().stats,children:[t.columns.reduce((e,t)=>e+t.cards.length,0)," cards"]})})]})}var m=r(795),_=r(3556),f=r.n(_);function p(e){let{boardId:t,onCancel:r,onSuccess:d}=e,[l,i]=(0,n.useState)(""),c=(0,s.Y)(e=>e.createColumn);return(0,a.jsxs)("form",{className:f().form,onSubmit:e=>{e.preventDefault(),l.trim()&&(c({title:l.trim(),boardId:t}),i(""),null==d||d())},children:[(0,a.jsx)(o.II,{value:l,onChange:e=>i(e.target.value),placeholder:"Enter list title...",autoFocus:!0}),(0,a.jsxs)("div",{className:f().actions,children:[(0,a.jsx)(o.zx,{type:"submit",size:"sm",disabled:!l.trim(),children:"Add List"}),(0,a.jsx)(o.zx,{type:"button",variant:"ghost",size:"sm",onClick:r,children:"Cancel"})]})]})}var h=r(4885),x=r.n(h);function b(e){let{boardId:t}=e,[r,d]=(0,n.useState)(!1);return r?(0,a.jsx)(p,{boardId:t,onCancel:()=>d(!1),onSuccess:()=>d(!1)}):(0,a.jsx)(o.zx,{variant:"ghost",className:x().button,onClick:()=>d(!0),children:"+ Add another list"})}var v=r(7345),C=r.n(v);function j(e){let{card:t,isOpen:r,onClose:d}=e,[l,i]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),m=(0,s.Y)(e=>e.updateCard);return(0,n.useEffect)(()=>{t&&(i(t.title),u(t.description||""))},[t]),(0,a.jsx)(o.u_,{isOpen:r,onClose:d,title:"Edit Card",children:(0,a.jsxs)("form",{className:C().form,onSubmit:e=>{e.preventDefault(),t&&l.trim()&&(m(t.id,{title:l.trim(),description:c.trim()||void 0}),d())},children:[(0,a.jsxs)("div",{className:C().field,children:[(0,a.jsx)("label",{className:C().label,children:"Title"}),(0,a.jsx)(o.II,{value:l,onChange:e=>i(e.target.value),placeholder:"Card title"})]}),(0,a.jsxs)("div",{className:C().field,children:[(0,a.jsx)("label",{className:C().label,children:"Description"}),(0,a.jsx)("textarea",{className:C().textarea,value:c,onChange:e=>u(e.target.value),placeholder:"Add a more detailed description...",rows:4})]}),(0,a.jsxs)("div",{className:C().actions,children:[(0,a.jsx)(o.zx,{type:"submit",disabled:!l.trim(),children:"Save"}),(0,a.jsx)(o.zx,{type:"button",variant:"secondary",onClick:d,children:"Cancel"})]})]})})}var g=r(3662),N=r(848),I=r.n(N);function B(e){let{column:t,actions:r}=e;return(0,a.jsxs)("div",{className:I().header,children:[(0,a.jsx)("h3",{className:I().title,children:t.title}),(0,a.jsx)("span",{className:I().count,children:t.cards.length}),r&&(0,a.jsx)("div",{className:I().actions,children:r})]})}var S=r(6390),k=r.n(S);function y(e){let{columnId:t,onCancel:r,onSuccess:d}=e,[l,i]=(0,n.useState)(""),c=(0,s.Y)(e=>e.createCard);return(0,a.jsxs)("form",{className:k().form,onSubmit:e=>{e.preventDefault(),l.trim()&&(c({title:l.trim(),columnId:t}),i(""),null==d||d())},children:[(0,a.jsx)(o.II,{value:l,onChange:e=>i(e.target.value),placeholder:"Enter a title for this card...",autoFocus:!0}),(0,a.jsxs)("div",{className:k().actions,children:[(0,a.jsx)(o.zx,{type:"submit",size:"sm",disabled:!l.trim(),children:"Add Card"}),(0,a.jsx)(o.zx,{type:"button",variant:"ghost",size:"sm",onClick:r,children:"Cancel"})]})]})}var w=r(9067),A=r.n(w);function D(e){let{columnId:t}=e,[r,d]=(0,n.useState)(!1);return r?(0,a.jsx)("div",{className:A().formWrapper,children:(0,a.jsx)(y,{columnId:t,onCancel:()=>d(!1),onSuccess:()=>d(!1)})}):(0,a.jsx)(o.zx,{variant:"ghost",fullWidth:!0,className:A().button,onClick:()=>d(!0),children:"+ Add a card"})}var E=r(9892),M=r(1039),z=r(5691),O=r.n(z);let F=(0,n.forwardRef)((e,t)=>{let{card:r,actions:n,isDragging:d,className:s,...l}=e;return(0,a.jsxs)("div",{ref:t,className:(0,M.cn)(O().card,d&&O().dragging,s),...l,children:[r.labels&&r.labels.length>0&&(0,a.jsx)("div",{className:O().labels,children:r.labels.map(e=>(0,a.jsx)("span",{className:O().label,style:{backgroundColor:e.color}},e.id))}),(0,a.jsx)("p",{className:O().title,children:r.title}),r.description&&(0,a.jsx)("p",{className:O().description,children:r.description}),n&&(0,a.jsx)("div",{className:O().actions,children:n})]})});function L(e){let{card:t,onClick:r}=e,{attributes:n,listeners:d,setNodeRef:s,transform:l,transition:o,isDragging:i}=(0,g.nB)({id:t.id}),c={transform:E.ux.Transform.toString(l),transition:o};return(0,a.jsx)("div",{ref:s,style:c,...n,...d,children:(0,a.jsx)(F,{card:t,isDragging:i,onClick:r})})}F.displayName="CardItem";var H=r(9331),T=r.n(H);function W(e){let{column:t,onCardClick:r}=e,{setNodeRef:n,isOver:d}=(0,m.Zj)({id:t.id});return(0,a.jsxs)("div",{className:T().column,children:[(0,a.jsx)(B,{column:t}),(0,a.jsx)(g.Fo,{items:t.cards.map(e=>e.id),strategy:g.qw,children:(0,a.jsx)("div",{ref:n,className:"".concat(T().cards," ").concat(d?T().over:""),children:t.cards.map(e=>(0,a.jsx)(L,{card:e,onClick:()=>r(e.id)},e.id))})}),(0,a.jsx)("div",{className:T().addCard,children:(0,a.jsx)(D,{columnId:t.id})})]})}var Y=r(9400),P=r.n(Y);function Z(e){let{board:t}=e,[r,d]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),{moveCard:i}=function(){let e=(0,s.Y)(e=>e.moveCard);return{moveCard:(t,r,a)=>{e(t,r,a)}}}(),c=(0,m.Dy)((0,m.VT)(m.we,{activationConstraint:{distance:8}})),u=(0,n.useCallback)(e=>{for(let r of t.columns){let t=r.cards.find(t=>t.id===e);if(t)return t}return null},[t.columns]),_=(0,n.useCallback)(e=>t.columns.find(t=>t.cards.some(t=>t.id===e)),[t.columns]),f=e=>{let t=u(e);t&&d(t)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.LB,{sensors:c,collisionDetection:m.ey,onDragStart:e=>{o(e.active.id)},onDragOver:e=>{let{active:r,over:a}=e;if(!a)return;let n=r.id,d=a.id,s=_(n),l=t.columns.find(e=>e.id===d)||_(d);if(!s||!l||s.id===l.id)return;let o=l.cards,c=o.findIndex(e=>e.id===d),u=c>=0?c:o.length;i(n,l.id,u)},onDragEnd:e=>{let{active:r,over:a}=e;if(o(null),!a)return;let n=r.id,d=a.id;if(n===d)return;let s=_(n),l=t.columns.find(e=>e.id===d)||_(d);if(!s||!l)return;let c=l.cards,u=c.findIndex(e=>e.id===n),m=c.findIndex(e=>e.id===d);u!==m&&m>=0&&i(n,l.id,m)},children:(0,a.jsxs)("div",{className:P().board,children:[t.columns.map(e=>(0,a.jsx)(W,{column:e,onCardClick:f},e.id)),(0,a.jsx)(b,{boardId:t.id})]})}),(0,a.jsx)(j,{card:r,isOpen:!!r,onClose:()=>d(null)})]})}var R=r(5598),G=r.n(R);function K(e){let{boardId:t}=e,r=(0,d.useRouter)(),l=(0,s.Y)(e=>e.boards),o=(0,s.Y)(e=>e.setCurrentBoard),i=l.find(e=>e.id===t);return((0,n.useEffect)(()=>(i&&o(t),()=>{o(null)}),[i,t,o]),i)?(0,a.jsxs)("div",{className:G().container,children:[(0,a.jsx)(u,{board:i}),(0,a.jsx)(Z,{board:i})]}):(0,a.jsxs)("div",{className:G().notFound,children:[(0,a.jsx)("h1",{children:"Board not found"}),(0,a.jsx)("p",{children:"The board you're looking for doesn't exist."}),(0,a.jsx)("button",{onClick:()=>r.push("/"),children:"Go back home"})]})}},1039:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.W)(t)}r(2265)},3279:function(e,t,r){"use strict";r.d(t,{zx:function(){return o},II:function(){return u},u_:function(){return p}});var a=r(7437),n=r(2265),d=r(1039),s=r(204),l=r.n(s);let o=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n="primary",size:s="md",fullWidth:o,children:i,...c}=e;return(0,a.jsx)("button",{ref:t,className:(0,d.cn)(l().button,l()[n],l()[s],o&&l().fullWidth,r),...c,children:i})});o.displayName="Button";var i=r(2684),c=r.n(i);let u=(0,n.forwardRef)((e,t)=>{let{className:r,error:n,...s}=e;return(0,a.jsxs)("div",{className:c().wrapper,children:[(0,a.jsx)("input",{ref:t,className:(0,d.cn)(c().input,n&&c().error,r),...s}),n&&(0,a.jsx)("span",{className:c().errorText,children:n})]})});u.displayName="Input";var m=r(4887),_=r(702),f=r.n(_);function p(e){let{isOpen:t,onClose:r,children:d,title:s}=e;return((0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),t)?(0,m.createPortal)((0,a.jsx)("div",{className:f().overlay,onClick:r,children:(0,a.jsxs)("div",{className:f().modal,onClick:e=>e.stopPropagation(),children:[s&&(0,a.jsxs)("div",{className:f().header,children:[(0,a.jsx)("h2",{className:f().title,children:s}),(0,a.jsx)("button",{className:f().closeButton,onClick:r,children:"\xd7"})]}),(0,a.jsx)("div",{className:f().content,children:d})]})}),document.body):null}var h=r(9375),x=r.n(h);(0,n.forwardRef)((e,t)=>{let{className:r,children:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)(x().card,r),...s,children:n})}).displayName="Card"},2975:function(e){e.exports={card:"BoardCard_card__Zum8K",active:"BoardCard_active__AUlkm",content:"BoardCard_content__okQ9L",title:"BoardCard_title__GihpL",stats:"BoardCard_stats__G8kFo",actions:"BoardCard_actions__EUff4"}},5691:function(e){e.exports={card:"CardItem_card__xMB_O",dragging:"CardItem_dragging__tp8Mm",labels:"CardItem_labels__AQJiy",label:"CardItem_label__k6oUN",title:"CardItem_title__vG16W",description:"CardItem_description__FSq8d",actions:"CardItem_actions__K1zM_"}},848:function(e){e.exports={header:"ColumnHeader_header__AYLEN",title:"ColumnHeader_title__bv4Dd",count:"ColumnHeader_count__PSgcT",actions:"ColumnHeader_actions__1nJZa"}},9067:function(e){e.exports={button:"AddCardButton_button__u40Au",formWrapper:"AddCardButton_formWrapper__j9RR4"}},6390:function(e){e.exports={form:"CreateCardForm_form__ydLcf",actions:"CreateCardForm_actions__lPzrD"}},4885:function(e){e.exports={button:"AddColumnButton_button__XwuNZ"}},3556:function(e){e.exports={form:"CreateColumnForm_form__07WT4",actions:"CreateColumnForm_actions__5ZCgZ"}},7345:function(e){e.exports={form:"EditCardModal_form__DLwWt",field:"EditCardModal_field__Ds0lr",label:"EditCardModal_label__mwcbl",textarea:"EditCardModal_textarea__Vf2c2",actions:"EditCardModal_actions__bv9y6"}},5598:function(e){e.exports={container:"BoardPage_container__BgSm4",notFound:"BoardPage_notFound__F2G05"}},204:function(e){e.exports={button:"Button_button__Y6_d8",primary:"Button_primary__XP_1l",secondary:"Button_secondary__kXaGA",ghost:"Button_ghost__tVo44",danger:"Button_danger__INEqY",sm:"Button_sm__0rL9A",md:"Button_md__7XQ9Z",lg:"Button_lg__0l0Iu",fullWidth:"Button_fullWidth__acaTW"}},9375:function(e){e.exports={card:"Card_card__f04b_"}},2684:function(e){e.exports={wrapper:"Input_wrapper__aPlm5",input:"Input_input__BBbsV",error:"Input_error__xjTMX",errorText:"Input_errorText__CYvK9"}},702:function(e){e.exports={overlay:"Modal_overlay__f_tQB",modal:"Modal_modal__GWr2T",header:"Modal_header__pTMZy",title:"Modal_title__GcFHv",closeButton:"Modal_closeButton__Q_XLC",content:"Modal_content__bb2J1"}},6689:function(e){e.exports={header:"BoardHeader_header__jnUQJ",left:"BoardHeader_left__IzRMx",backLink:"BoardHeader_backLink__bmj7U",title:"BoardHeader_title__dzWMc",titleInput:"BoardHeader_titleInput__SzcVm",right:"BoardHeader_right__cf91Y",stats:"BoardHeader_stats__qQGOt"}},9400:function(e){e.exports={board:"KanbanBoard_board__I4RQY"}},9331:function(e){e.exports={column:"KanbanColumn_column__6DDlu",cards:"KanbanColumn_cards__0Jm7F",over:"KanbanColumn_over__qMhU_",addCard:"KanbanColumn_addCard__vOsJf"}}},function(e){e.O(0,[950,266,513,971,117,744],function(){return e(e.s=3827)}),_N_E=e.O()}]);